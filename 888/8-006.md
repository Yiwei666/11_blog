# 1. `multiprocessing`模块


Python的`multiprocessing`模块是一个用于创建进程的库，它可以用Python代码来创建多个进程，类似于使用多线程，但每个进程有自己的完全独立的内存空间，而不是共享内存。这使得它特别适用于CPU密集型任务，因为它可以绕过全局解释器锁（GIL），允许多个处理器核心并行工作。

### 1. 基本概念

- `进程`：一个独立的执行上下文，有自己的内存空间。
- `全局解释器锁（GIL）`：Python的一种机制，用于在执行多线程时防止多个线程同时执行Python字节码。由于multiprocessing使用多个进程，因此可以绕过GIL，每个进程都能够全速运行。
- `进程池（Pool）`：用于管理多个进程的容器，可以方便地管理大量的进程，并提供一个简单的方式来并行地执行任务。


### 2. 主要组件

- `Process 类`：用于表示一个进程对象。
- `Queue、Pipe`：进程间通信（IPC）的工具。
- `Lock、Semaphore` 等：进程间的同步原语，用于控制访问共享资源。
- `Pool`：提供了一个方便的方式来管理大量的进程。






# 2. 多进程案例


```py
def task(input, multiplier, result_dict):
    # 模拟一些计算，使用multiplier作为乘数
    output = input * input * multiplier
    result_dict[input] = output
```



```py
import multiprocessing
from tasks import task  # 确保导入了更新后的task函数

if __name__ == '__main__':
    # 创建一个Manager字典，用于进程间通信
    manager = multiprocessing.Manager()
    result_dict = manager.dict()

    # 创建进程池
    pool = multiprocessing.Pool(processes=4)

    # 准备输入数据和multiplier参数
    inputs = [1, 2, 3, 4]
    multiplier = 2  # 这可以是一个常数，或者你可以为每个input定义一个不同的multiplier

    # 启动多进程
    for input in inputs:
        pool.apply_async(task, args=(input, multiplier, result_dict))

    # 关闭进程池，等待所有进程完成
    pool.close()
    pool.join()

    # 输出结果
    print(dict(result_dict))
```










# 参考资料

配位数计算多进程加速：https://github.com/Yiwei666/01_python_script/blob/main/03_postProcessTool/01_multiprocessing_CN/README.md





