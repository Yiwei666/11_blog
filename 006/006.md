# V2Ray+ws+tls+web 配置教程

1. 云服务器购买
2. ubuntu中nginx安装和环境配置
3. cloudflare域名解析
4. ubuntu中v2ray安装和配置
5. windows中v2ray安装和配置
6. ubuntu中warp安装和配置
7. 安卓手机客户端配置v2ray

# 1. 云服务器购买

可选的海外云服务器厂商包括digitalocean，aws，azure等，配置最低要求为1核1G，内存大于30G，系统推荐使用ubuntu系统。服务器所在地可选日本 Tokyo，Singapore，美国东部和西部。

# 2. nginx安装和环境配置

1. nignx安装参考：https://github.com/Yiwei666/10_private_code/blob/main/01_config/README.md

- ubuntu系统中nginx的安装
```shell
sudo apt update              # 1. 打开终端，使用sudo命令以管理员权限运行以下命令，更新软件包列表
 
sudo apt install nginx       # 2. 安装Nginx
 
                             # 3. 安装过程中，系统会要求你确认安装。按下Y键并按回车键继续安装。
 
sudo systemctl status nginx  # 4. 安装完成后，Nginx将自动启动。你可以使用以下命令检查Nginx的状态

sudo systemctl enable nginx  # 5. 设置开机自启动
```

2. nginx 环境配置参考：https://github.com/Yiwei666/10_private_code/blob/main/01_config/nginx_ubuntu.conf

```
    server {
        listen 443 ssl;
        server_name domain.com;                                   # 替换为您的域名
        ssl_certificate /etc/nginx/key_crt/domain.com.crt;        # 替换为您下载的证书文件路径
        ssl_certificate_key /etc/nginx/key_crt/domain.com.key;    # 替换为您下载的密钥文件路径
        ssl_protocols TLSv1.2 TLSv1.3;                          # 选择您需要支持的 SSL/TLS 协议版本


        location / {
            root /home/01_html;       # 指定的服务器根目录，注意不要选择root目录，一般用home目录
            index mainpage.html;      # 访问ip默认显示的网页，该网页需要置于上述根目录下
        }

        location /home/01_html {       #/ray 路径需要和v2ray服务器端，客户端保持一致
            proxy_redirect off;
            proxy_pass http://127.0.0.1:10087; #此IP地址和端口需要和v2ray服务器保持一致，
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_set_header Host $http_host;
        }
    }	
```

- 修改完nginx的配置文件后记得重启nginx
```bash
systemctl restart nginx
```


- 下载 mainpage.html 命令

```shell
*/5 * * * * curl -o /home/01_html/mainpage.html  https://02-html.vercel.app/
```


# 3. cloudflare域名解析

1. cloudflare域名解析参考：https://blog.csdn.net/qq_45659165/article/details/129486643


# 4. ubuntu中v2ray安装和配置

1. v2ray 安装脚本（github）：https://github.com/v2fly/fhs-install-v2ray

```bash
// 安装和更新v2ray
bash <(curl -L https://raw.githubusercontent.com/v2fly/fhs-install-v2ray/master/install-release.sh)
```
- 参考资料
【海外云服务器（二）】基于v2ray和warp搭建代理云服务器访问chatGPT：https://blog.csdn.net/qq_45659165/article/details/129346637

2. linux中v2ray配置：
   - https://github.com/Yiwei666/10_private_code/blob/main/01_config/config_linux.json
   - https://github.com/Yiwei666/04_-configure-file/blob/main/v2ray%2Bwarp_config.json

uuid生成网址：https://www.uuidgenerator.net/

linux中v2ray配置文件路径

```
/usr/local/etc/v2ray/config.json                       # centos中v2ray配置文件路径

jq . /usr/local/etc/v2ray/config.json                  # 部分校验语法正确性
```

# 5. windows中v2ray安装和配置

1. windows中v2ray配置文件：https://github.com/Yiwei666/04_-configure-file/blob/main/v2ray_win_config.json


# 6. ubuntu中warp安装和配置




# 7. 安卓手机客户端配置v2ray







